{"mappings":"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","sources":["src/js/pagination-library.js","src/js/gallery.js"],"sourcesContent":["// Load inner sources\nimport createTypicalPaginationNavigation from './pagination-create-typical-nav';\nimport createMobilePaginationNavigation from './pagination-create-mobile-nav';\nimport { load } from './local_storage';\nimport { handleClick } from './gallery';\n\n// Link on HTML / DOM elements\nconst paginationRef = document.querySelector('.js-pagination-library');\nconst imageGallaryRef = document.querySelector('.js-gallery-library');\n\n// Support pagination data\nlet paginationData = {\n  page: 0,\n  totalPages: 0,\n};\nlet objArrayData = [];\n\nexport function onLoadLocalStrQuery(key) { \n  objArrayData = [];\n  const queue = load(`${key}`);\n  const numQueue = queue.length;\n  const allPages = Math.ceil(numQueue / 20);\n  paginationData.page = 1;\n  paginationData.totalPages = allPages;\n  for (let idx = 0; idx < allPages; idx++) {\n    let portion = queue.slice((20 * idx), (20 * (idx + 1)));\n    console.log(portion)\n    objArrayData.push(portion);\n    changeViewportAndData(paginationData.page, paginationData.totalPages);\n    handleClick(objArrayData[0])\n  }\n}\n\n// Here starting panel pagination\n// where: p is page, tP is total pages\nfunction changeViewportAndData(p, tP) {\n  // imageGallaryRef.innerHTML = '';\n  let newData;\n  if (!tP) {\n    return;\n  } else {\n    newData = {\n      page: p,\n      totalPages: tP,\n    };\n  }\n  paginationData = newData;\n  paginationRef.innerHTML = '';\n  if (window.innerWidth >= 480) {\n    createTypicalPaginationNavigation(newData); // Viewport width for tab and desktop device\n  } else {\n    createMobilePaginationNavigation(newData); // Viewport width for mobile device\n  }\n}\n\n// Change form on resize viewport\nwindow.addEventListener('resize', onChangeWindow);\nfunction onChangeWindow(evt) {\n  paginationRef.innerHTML = '';\n  if (evt.target.innerWidth >= 480) {\n    createTypicalPaginationNavigation(paginationData);\n  } else {\n    createMobilePaginationNavigation(paginationData);\n  }\n}\n\n// Behavior pagination panel and render image(s) when clicking on the button\npaginationRef.addEventListener('click', onPaginationNavigationClick);\nfunction onPaginationNavigationClick(evt) {\n  const { tagName, name, textContent } = evt.target;\n\n  if (tagName !== 'BUTTON') {\n    return;\n  } else {\n    if (\n      name === 'number-page' ||\n      name === 'first-page' ||\n      name === 'last-page'\n    ) {\n      paginationData.page = textContent;\n      imageGallaryRef.innerHTML = '';\n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[textContent-1])\n    } else if (name === 'pre-page') {\n      paginationData.page -= 1;\n      imageGallaryRef.innerHTML = '';     \n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[paginationData.page - 1]);\n      \n    } else if (name === 'next-page') {\n      paginationData.page += 1;\n      imageGallaryRef.innerHTML = '';\n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[paginationData.page - 1]);\n    }\n  }\n}\n\n","import { renderGalleryFilms } from './render-gallery-films';\nimport { load } from './local_storage';\nimport newsApiService from './fetch';\nimport { addListenerBtnYouTube } from './trailer';\nimport { onLoadLocalStrQuery } from './pagination-library';\n\n// renderSavedFilms('watch');\n// console.log(renderSavedFilms('watch'))\n\nconst watchedButton = document.querySelector('.btn-watch');\nconst queueButton = document.querySelector('.btn-queue');\nconst galleryEl = document.querySelector('.js-gallery-library');\nconst noFilmsMessage = document.querySelector('.alert__message');\nconst ApiService = new newsApiService();\n\nwatchedButton.addEventListener('click', firstQueryToWatched);\nqueueButton.addEventListener('click', firstQueryToQueue);\n\nonLoadLocalStrQuery('watch');\nfunction firstQueryToWatched() {\n  onLoadLocalStrQuery('watch');\n  addWatchListActive();\n}\n\nfunction firstQueryToQueue() {\n  onLoadLocalStrQuery('queue');\n  addQueueListActive();\n}\n\n// Отрисовка фильмов из списка watch\nexport function handleClick(data) {\n  cleanHTML();  \n\n  const arrWatched = data;\n  arrWatched.forEach(film => {\n    ApiService.getFilmDetails(film).then(data => {\n      const markup = `<li class=\"card card-js\" data-id=\"${data.id}\">\n      <div>\n        <button data-id=\"${data.id}\" class=\"button-youtube\"></button>\n      </div>\n      <div class=\"card__wrap\">\n        <img\n          class=\"card__img\"\n          src=\"https://image.tmdb.org/t/p/w500/${data.poster_path}\"\n          alt=\"${data.original_title}\"\n          width=\"395\"\n          height=\"574\"\n        />\n        <h3 class=\"card__name\">${data.title}</h3>\n        <p class=\"card__info\">\n          ${data.genres[0].name} | ${data.release_date}<span class=\"card__rating\">\n            ${data.vote_average}\n          </span>\n        </p>\n      </div>\n    </li>`;\n      galleryEl.insertAdjacentHTML('beforeend', markup);\n    });\n  });\n\n  setTimeout(addListenerBtnYouTube, 500);\n}\n\n// Проверка состояния кнопок watch и queue\nfunction addWatchListActive() {\n  if (!watchedButton.classList.contains('active')) {\n    watchedButton.classList.add('active');\n    queueButton.classList.contains('active')\n      ? queueButton.classList.remove('active')\n      : null;\n  }\n}\n\nfunction addQueueListActive() {\n  if (!queueButton.classList.contains('active')) {\n    queueButton.classList.add('active');\n    watchedButton.classList.contains('active')\n      ? watchedButton.classList.remove('active')\n      : null;\n  }\n}\n\n// // Рендер сохраненных фильмов\n// function renderSavedFilms(key) {\n//   // cleanHTML();\n  \n//   const addedFilms = load(key);\n//   if (addedFilms && addedFilms.length > 0) {\n//     console.log(key);\n\n//     renderGalleryFilms(addedFilms);\n    \n//     noFilmsMessage.classList.add('visually-hidden');\n//   } else {\n//     noFilmsMessage.classList.remove('visually-hidden');\n//   }\n  \n// }\n\n// Очистка страницы\nfunction cleanHTML() {\n  galleryEl.innerHTML = '';\n}\n"],"names":["$aRYMt","parcelRequire","$7c59f4ec4043ce00$var$watchedButton","document","querySelector","$7c59f4ec4043ce00$var$queueButton","$7c59f4ec4043ce00$var$galleryEl","$7c59f4ec4043ce00$var$ApiService","$cyIMT","default","$7c59f4ec4043ce00$export$b981489921ee18cd","data1","innerHTML","forEach","film","getFilmDetails","then","data","markup","id","poster_path","original_title","title","genres","name","release_date","vote_average","insertAdjacentHTML","setTimeout","$37v9V","addListenerBtnYouTube","addEventListener","$37dad58aaab9173a$export$37061c7bd73f4879","classList","contains","add","remove","$37dad58aaab9173a$var$paginationRef","$37dad58aaab9173a$var$imageGallaryRef","$37dad58aaab9173a$var$paginationData","page","totalPages","$37dad58aaab9173a$var$objArrayData","key","queue","$fnyLm","load","numQueue","length","allPages","Math","ceil","idx","portion","slice","console","log","push","$37dad58aaab9173a$var$changeViewportAndData","p","tP","newData","window","innerWidth","$jGlnN","evt","target","tagName","textContent"],"version":3,"file":"library.dd38a9ab.js.map"}