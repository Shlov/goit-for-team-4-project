{"mappings":"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","sources":["src/js/pagination-library.js","src/js/gallery.js"],"sourcesContent":["// Load inner sources\nimport createTypicalPaginationNavigation from './pagination-create-typical-nav';\nimport createMobilePaginationNavigation from './pagination-create-mobile-nav';\nimport { load } from './local_storage';\nimport { handleClick } from './gallery';\n\n// Link on HTML / DOM elements\nconst paginationRef = document.querySelector('.js-pagination-library');\nconst imageGallaryRef = document.querySelector('.js-gallery-library');\n\n// Support pagination data\nlet paginationData = {\n  page: 0,\n  totalPages: 0,\n};\nlet objArrayData = [];\n\nexport function onLoadLocalStrQuery(key) { \n  objArrayData = [];\n  const queue = load(`${key}`);\n  const numQueue = queue.length;\n  const allPages = Math.ceil(numQueue / 20);\n  paginationData.page = 1;\n  paginationData.totalPages = allPages;\n  for (let idx = 0; idx < allPages; idx++) {\n    let portion = queue.slice((20 * idx), (20 * (idx + 1)));\n    console.log(portion)\n    objArrayData.push(portion);\n    changeViewportAndData(paginationData.page, paginationData.totalPages);\n    handleClick(objArrayData[0])\n  }\n}\n\n// Here starting panel pagination\n// where: p is page, tP is total pages\nfunction changeViewportAndData(p, tP) {\n  // imageGallaryRef.innerHTML = '';\n  let newData;\n  if (!tP) {\n    return;\n  } else {\n    newData = {\n      page: p,\n      totalPages: tP,\n    };\n  }\n  paginationData = newData;\n  paginationRef.innerHTML = '';\n  if (window.innerWidth >= 480) {\n    createTypicalPaginationNavigation(newData); // Viewport width for tab and desktop device\n  } else {\n    createMobilePaginationNavigation(newData); // Viewport width for mobile device\n  }\n}\n\n// Change form on resize viewport\nwindow.addEventListener('resize', onChangeWindow);\nfunction onChangeWindow(evt) {\n  paginationRef.innerHTML = '';\n  if (evt.target.innerWidth >= 480) {\n    createTypicalPaginationNavigation(paginationData);\n  } else {\n    createMobilePaginationNavigation(paginationData);\n  }\n}\n\n// Behavior pagination panel and render image(s) when clicking on the button\npaginationRef.addEventListener('click', onPaginationNavigationClick);\nfunction onPaginationNavigationClick(evt) {\n  const { tagName, name, textContent } = evt.target;\n\n  if (tagName !== 'BUTTON') {\n    return;\n  } else {\n    if (\n      name === 'number-page' ||\n      name === 'first-page' ||\n      name === 'last-page'\n    ) {\n      paginationData.page = textContent;\n      imageGallaryRef.innerHTML = '';\n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[textContent-1])\n    } else if (name === 'pre-page') {\n      paginationData.page -= 1;\n      imageGallaryRef.innerHTML = '';     \n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[paginationData.page - 1]);\n      \n    } else if (name === 'next-page') {\n      paginationData.page += 1;\n      imageGallaryRef.innerHTML = '';\n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[paginationData.page - 1]);\n    }\n  }\n}\n\n","import { renderGalleryFilms } from './render-gallery-films';\nimport { load } from './local_storage';\nimport newsApiService from './fetch';\nimport { addListenerBtnYouTube } from './trailer';\nimport { onLoadLocalStrQuery } from './pagination-library';\n\n// renderSavedFilms('watch');\n// console.log(renderSavedFilms('watch'))\n\nconst watchedButton = document.querySelector('.btn-watch');\nconst queueButton = document.querySelector('.btn-queue');\nconst galleryEl = document.querySelector('.js-gallery-library');\nconst noFilmsMessage = document.querySelector('.alert__message');\nconst ApiService = new newsApiService();\n\nwatchedButton.addEventListener('click', firstQueryToWatched);\nqueueButton.addEventListener('click', firstQueryToQueue);\n\nonLoadLocalStrQuery('watch');\nfunction firstQueryToWatched() {\n  onLoadLocalStrQuery('watch');\n  addWatchListActive();\n}\n\nfunction firstQueryToQueue() {\n  onLoadLocalStrQuery('queue');\n  addQueueListActive();\n}\n\n// Отрисовка фильмов из списка watch\nexport function handleClick(data) {\n  cleanHTML();  \n\n  const arrWatched = data;\n  arrWatched.forEach(film => {\n    ApiService.getFilmDetails(film).then(data => {\n      const markup = `<li class=\"card card-js\" data-id=\"${data.id}\">\n      <div>\n        <button data-id=\"${data.id}\" class=\"button-youtube\"></button>\n      </div>\n      <div class=\"card__wrap\">\n        <img\n          class=\"card__img\"\n          src=\"https://image.tmdb.org/t/p/w500/${data.poster_path}\"\n          alt=\"${data.original_title}\"\n          width=\"395\"\n          height=\"574\"\n        />\n        <h3 class=\"card__name\">${data.title}</h3>\n        <p class=\"card__info\">\n          ${data.genres[0].name} | ${data.release_date}<span class=\"card__rating\">\n            ${data.vote_average}\n          </span>\n        </p>\n      </div>\n    </li>`;\n      galleryEl.insertAdjacentHTML('beforeend', markup);\n    });\n  });\n\n  setTimeout(addListenerBtnYouTube, 500);\n}\n\n// Проверка состояния кнопок watch и queue\nfunction addWatchListActive() {\n  if (!watchedButton.classList.contains('active')) {\n    watchedButton.classList.add('active');\n    queueButton.classList.contains('active')\n      ? queueButton.classList.remove('active')\n      : null;\n  }\n}\n\nfunction addQueueListActive() {\n  if (!queueButton.classList.contains('active')) {\n    queueButton.classList.add('active');\n    watchedButton.classList.contains('active')\n      ? watchedButton.classList.remove('active')\n      : null;\n  }\n}\n\n// // Рендер сохраненных фильмов\n// function renderSavedFilms(key) {\n//   // cleanHTML();\n  \n//   const addedFilms = load(key);\n//   if (addedFilms && addedFilms.length > 0) {\n//     console.log(key);\n\n//     renderGalleryFilms(addedFilms);\n    \n//     noFilmsMessage.classList.add('visually-hidden');\n//   } else {\n//     noFilmsMessage.classList.remove('visually-hidden');\n//   }\n  \n// }\n\n// Очистка страницы\nfunction cleanHTML() {\n  galleryEl.innerHTML = '';\n}\n"],"names":["$fKOzV","parcelRequire","$6756f0db6f988caf$var$watchedButton","document","querySelector","$6756f0db6f988caf$var$queueButton","$6756f0db6f988caf$var$galleryEl","$6756f0db6f988caf$var$ApiService","$5g02X","default","$6756f0db6f988caf$export$b981489921ee18cd","data1","innerHTML","forEach","film","getFilmDetails","then","data","markup","concat","id","poster_path","original_title","title","genres","name","release_date","vote_average","insertAdjacentHTML","setTimeout","$cDXQO","addListenerBtnYouTube","addEventListener","$4e1fdcffa24ebef7$export$37061c7bd73f4879","classList","contains","add","remove","$4e1fdcffa24ebef7$var$paginationRef","$4e1fdcffa24ebef7$var$imageGallaryRef","$4e1fdcffa24ebef7$var$paginationData","page","totalPages","$4e1fdcffa24ebef7$var$objArrayData","key","queue","$cbazt","load","numQueue","length","allPages","Math","ceil","idx","portion","slice","console","log","push","$4e1fdcffa24ebef7$var$changeViewportAndData","p","tP","newData","window","innerWidth","$2lXij","evt","target","_target","tagName","textContent"],"version":3,"file":"library.0658fdfa.js.map"}