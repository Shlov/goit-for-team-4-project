{"mappings":"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","sources":["src/js/pagination-library.js","src/js/gallery.js"],"sourcesContent":["// Load inner sources\nimport createTypicalPaginationNavigation from './pagination-create-typical-nav';\nimport createMobilePaginationNavigation from './pagination-create-mobile-nav';\nimport { load } from './local_storage';\nimport { handleClick } from './gallery';\n\n// Link on HTML / DOM elements\nconst paginationRef = document.querySelector('.js-pagination-library');\nconst imageGallaryRef = document.querySelector('.js-gallery-library');\n\n// Support pagination data\nlet paginationData = {\n  page: 0,\n  totalPages: 0,\n};\nlet objArrayData = [];\n\nexport function onLoadLocalStrQuery(key) { \n  objArrayData = [];\n  const queue = load(`${key}`);\n  const numQueue = queue.length;\n  const allPages = Math.ceil(numQueue / 20);\n  paginationData.page = 1;\n  paginationData.totalPages = allPages;\n  for (let idx = 0; idx < allPages; idx++) {\n    let portion = queue.slice((20 * idx), (20 * (idx + 1)));\n    console.log(portion)\n    objArrayData.push(portion);\n    changeViewportAndData(paginationData.page, paginationData.totalPages);\n    handleClick(objArrayData[0])\n  }\n}\n\n// Here starting panel pagination\n// where: p is page, tP is total pages\nfunction changeViewportAndData(p, tP) {\n  // imageGallaryRef.innerHTML = '';\n  let newData;\n  if (!tP) {\n    return;\n  } else {\n    newData = {\n      page: p,\n      totalPages: tP,\n    };\n  }\n  paginationData = newData;\n  paginationRef.innerHTML = '';\n  if (window.innerWidth >= 480) {\n    createTypicalPaginationNavigation(newData); // Viewport width for tab and desktop device\n  } else {\n    createMobilePaginationNavigation(newData); // Viewport width for mobile device\n  }\n}\n\n// Change form on resize viewport\nwindow.addEventListener('resize', onChangeWindow);\nfunction onChangeWindow(evt) {\n  paginationRef.innerHTML = '';\n  if (evt.target.innerWidth >= 480) {\n    createTypicalPaginationNavigation(paginationData);\n  } else {\n    createMobilePaginationNavigation(paginationData);\n  }\n}\n\n// Behavior pagination panel and render image(s) when clicking on the button\npaginationRef.addEventListener('click', onPaginationNavigationClick);\nfunction onPaginationNavigationClick(evt) {\n  const { tagName, name, textContent } = evt.target;\n\n  if (tagName !== 'BUTTON') {\n    return;\n  } else {\n    if (\n      name === 'number-page' ||\n      name === 'first-page' ||\n      name === 'last-page'\n    ) {\n      paginationData.page = textContent;\n      imageGallaryRef.innerHTML = '';\n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[textContent-1])\n    } else if (name === 'pre-page') {\n      paginationData.page -= 1;\n      imageGallaryRef.innerHTML = '';     \n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[paginationData.page - 1]);\n      \n    } else if (name === 'next-page') {\n      paginationData.page += 1;\n      imageGallaryRef.innerHTML = '';\n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[paginationData.page - 1]);\n    }\n  }\n}\n\n","import { renderGalleryFilms } from './render-gallery-films';\nimport { load } from './local_storage';\nimport newsApiService from './fetch';\nimport { addListenerBtnYouTube } from './trailer';\nimport { onLoadLocalStrQuery } from './pagination-library';\n\nrenderSavedFilms('watch');\n\nconst watchedButton = document.querySelector('.btn-watch');\nconst queueButton = document.querySelector('.btn-queue');\nconst galleryEl = document.querySelector('.film-list');\nconst noFilmsMessage = document.querySelector('.alert__message');\nconst ApiService = new newsApiService();\n\nwatchedButton.addEventListener('click', firstQueryToWatched);\nqueueButton.addEventListener('click', firstQueryToQueue);\n\n\nfunction firstQueryToWatched() {\n  onLoadLocalStrQuery('watch');\n  addWatchListActive();\n}\n\n\nfunction firstQueryToQueue() {\n  onLoadLocalStrQuery('queue');\n  addQueueListActive();\n}\n\n// Отрисовка фильмов из списка watch\nexport function handleClick(data) {\n  cleanHTML();  \n\n  const arrWatched = data;\n  arrWatched.forEach(film => {\n    ApiService.getFilmDetails(film).then(data => {\n      const markup = `<li class=\"card card-js\" data-id=\"${data.id}\">\n      <div>\n        <button data-id=\"${data.id}\" class=\"button-youtube\"></button>\n      </div>\n      <div class=\"card__wrap\">\n        <img\n          class=\"card__img\"\n          src=\"https://image.tmdb.org/t/p/w500/${data.poster_path}\"\n          alt=\"${data.original_title}\"\n          width=\"395\"\n          height=\"574\"\n        />\n        <h3 class=\"card__name\">${data.title}</h3>\n        <p class=\"card__info\">\n          ${data.genres[0].name} | ${data.release_date}<span class=\"card__rating\">\n            ${data.vote_average}\n          </span>\n        </p>\n      </div>\n    </li>`;\n      galleryEl.insertAdjacentHTML('beforeend', markup);\n    });\n  });\n\n  setTimeout(addListenerBtnYouTube, 500);\n}\n\n// Рендер сохраненных фильмов\n\nfunction renderSavedFilms(key) {\n  cleanHTML();\n  const addedFilms = load(key);\n  if (addedFilms && addedFilms.length > 0) {\n    renderGalleryFilms(addedFilms);\n    noFilmsMessage.classList.add('visually-hidden');\n  } else {\n    noFilmsMessage.classList.remove('visually-hidden');\n  }\n}\n\n// Очистка страницы\nfunction cleanHTML() {\n  galleryEl.innerHTML = '';\n}\n"],"names":["$fKOzV","parcelRequire","$4e1fdcffa24ebef7$var$paginationRef","document","querySelector","$4e1fdcffa24ebef7$var$imageGallaryRef","$4e1fdcffa24ebef7$var$paginationData","page","totalPages","$4e1fdcffa24ebef7$var$objArrayData","$4e1fdcffa24ebef7$export$37061c7bd73f4879","key","queue","$cbazt","load","concat","numQueue","length","allPages","Math","ceil","idx","portion","slice","console","log","push","$4e1fdcffa24ebef7$var$changeViewportAndData","$8S4BJ","handleClick","p","tP","newData","innerHTML","window","innerWidth","default","$2lXij","addEventListener","evt","target","_target","tagName","name","textContent","$9f4sD","$6756f0db6f988caf$var$cleanHTML","addedFilms","renderGalleryFilms","$6756f0db6f988caf$var$noFilmsMessage","classList","add","remove","$6756f0db6f988caf$var$renderSavedFilms","$6756f0db6f988caf$var$watchedButton","$6756f0db6f988caf$var$queueButton","$6756f0db6f988caf$var$galleryEl","$6756f0db6f988caf$var$ApiService","$5g02X","$6756f0db6f988caf$export$b981489921ee18cd","data1","forEach","film","getFilmDetails","then","data","markup","id","poster_path","original_title","title","genres","release_date","vote_average","insertAdjacentHTML","setTimeout","$cDXQO","addListenerBtnYouTube","$6HQZs","onLoadLocalStrQuery","addWatchListActive","addQueueListActive"],"version":3,"file":"library.182daa4e.js.map"}