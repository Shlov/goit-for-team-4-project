{"mappings":"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","sources":["src/js/pagination-library.js","src/js/gallery.js"],"sourcesContent":["// Load inner sources\nimport createTypicalPaginationNavigation from './pagination-create-typical-nav';\nimport createMobilePaginationNavigation from './pagination-create-mobile-nav';\nimport { load } from './local_storage';\nimport { handleClick } from './gallery';\n\n// Link on HTML / DOM elements\nconst paginationRef = document.querySelector('.js-pagination-library');\nconst imageGallaryRef = document.querySelector('.js-gallery-library');\n\n// Support pagination data\nlet paginationData = {\n  page: 0,\n  totalPages: 0,\n};\nlet objArrayData = [];\n\nexport function onLoadLocalStrQuery(key) { \n  objArrayData = [];\n  const queue = load(`${key}`);\n  const numQueue = queue.length;\n  const allPages = Math.ceil(numQueue / 20);\n  paginationData.page = 1;\n  paginationData.totalPages = allPages;\n  for (let idx = 0; idx < allPages; idx++) {\n    let portion = queue.slice((20 * idx), (20 * (idx + 1)));\n    console.log(portion)\n    objArrayData.push(portion);\n    changeViewportAndData(paginationData.page, paginationData.totalPages);\n    handleClick(objArrayData[0])\n  }\n}\n\n// Here starting panel pagination\n// where: p is page, tP is total pages\nfunction changeViewportAndData(p, tP) {\n  // imageGallaryRef.innerHTML = '';\n  let newData;\n  if (!tP) {\n    return;\n  } else {\n    newData = {\n      page: p,\n      totalPages: tP,\n    };\n  }\n  paginationData = newData;\n  paginationRef.innerHTML = '';\n  if (window.innerWidth >= 480) {\n    createTypicalPaginationNavigation(newData); // Viewport width for tab and desktop device\n  } else {\n    createMobilePaginationNavigation(newData); // Viewport width for mobile device\n  }\n}\n\n// Change form on resize viewport\nwindow.addEventListener('resize', onChangeWindow);\nfunction onChangeWindow(evt) {\n  paginationRef.innerHTML = '';\n  if (evt.target.innerWidth >= 480) {\n    createTypicalPaginationNavigation(paginationData);\n  } else {\n    createMobilePaginationNavigation(paginationData);\n  }\n}\n\n// Behavior pagination panel and render image(s) when clicking on the button\npaginationRef.addEventListener('click', onPaginationNavigationClick);\nfunction onPaginationNavigationClick(evt) {\n  const { tagName, name, textContent } = evt.target;\n\n  if (tagName !== 'BUTTON') {\n    return;\n  } else {\n    if (\n      name === 'number-page' ||\n      name === 'first-page' ||\n      name === 'last-page'\n    ) {\n      paginationData.page = textContent;\n      imageGallaryRef.innerHTML = '';\n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[textContent-1])\n    } else if (name === 'pre-page') {\n      paginationData.page -= 1;\n      imageGallaryRef.innerHTML = '';     \n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[paginationData.page - 1]);\n      \n    } else if (name === 'next-page') {\n      paginationData.page += 1;\n      imageGallaryRef.innerHTML = '';\n      changeViewportAndData(paginationData.page, paginationData.totalPages);\n      handleClick(objArrayData[paginationData.page - 1]);\n    }\n  }\n}\n\n","import { renderGalleryFilms } from './render-gallery-films';\nimport { load } from './local_storage';\nimport newsApiService from './fetch';\nimport { addListenerBtnYouTube } from './trailer';\nimport { onLoadLocalStrQuery } from './pagination-library';\n\nrenderSavedFilms('watch');\n\nconst watchedButton = document.querySelector('.btn-watch');\nconst queueButton = document.querySelector('.btn-queue');\nconst galleryEl = document.querySelector('.film-list');\nconst noFilmsMessage = document.querySelector('.alert__message');\nconst ApiService = new newsApiService();\n\nwatchedButton.addEventListener('click', firstQueryToWatched);\nqueueButton.addEventListener('click', firstQueryToQueue);\n\n\nfunction firstQueryToWatched() {\n  onLoadLocalStrQuery('watch');\n  addWatchListActive();\n}\n\n\nfunction firstQueryToQueue() {\n  onLoadLocalStrQuery('queue');\n  addQueueListActive();\n}\n\n// Отрисовка фильмов из списка watch\nexport function handleClick(data) {\n  cleanHTML();  \n\n  const arrWatched = data;\n  arrWatched.forEach(film => {\n    ApiService.getFilmDetails(film).then(data => {\n      const markup = `<li class=\"card card-js\" data-id=\"${data.id}\">\n      <div>\n        <button data-id=\"${data.id}\" class=\"button-youtube\"></button>\n      </div>\n      <div class=\"card__wrap\">\n        <img\n          class=\"card__img\"\n          src=\"https://image.tmdb.org/t/p/w500/${data.poster_path}\"\n          alt=\"${data.original_title}\"\n          width=\"395\"\n          height=\"574\"\n        />\n        <h3 class=\"card__name\">${data.title}</h3>\n        <p class=\"card__info\">\n          ${data.genres[0].name} | ${data.release_date}<span class=\"card__rating\">\n            ${data.vote_average}\n          </span>\n        </p>\n      </div>\n    </li>`;\n      galleryEl.insertAdjacentHTML('beforeend', markup);\n    });\n  });\n\n  setTimeout(addListenerBtnYouTube, 500);\n}\n\n// Рендер сохраненных фильмов\n\nfunction renderSavedFilms(key) {\n  cleanHTML();\n  const addedFilms = load(key);\n  if (addedFilms && addedFilms.length > 0) {\n    renderGalleryFilms(addedFilms);\n    noFilmsMessage.classList.add('visually-hidden');\n  } else {\n    noFilmsMessage.classList.remove('visually-hidden');\n  }\n}\n\n// Очистка страницы\nfunction cleanHTML() {\n  galleryEl.innerHTML = '';\n}\n"],"names":["$aRYMt","parcelRequire","$37dad58aaab9173a$var$paginationRef","document","querySelector","$37dad58aaab9173a$var$imageGallaryRef","$37dad58aaab9173a$var$paginationData","page","totalPages","$37dad58aaab9173a$var$objArrayData","$37dad58aaab9173a$export$37061c7bd73f4879","key","queue","$fnyLm","load","numQueue","length","allPages","Math","ceil","idx","portion","slice","console","log","push","$37dad58aaab9173a$var$changeViewportAndData","$aFV0K","handleClick","p","tP","newData","innerHTML","window","innerWidth","default","$jGlnN","addEventListener","evt","target","tagName","name","textContent","$jyFSs","$7c59f4ec4043ce00$var$cleanHTML","addedFilms","renderGalleryFilms","$7c59f4ec4043ce00$var$noFilmsMessage","classList","add","remove","$7c59f4ec4043ce00$var$renderSavedFilms","$7c59f4ec4043ce00$var$watchedButton","$7c59f4ec4043ce00$var$queueButton","$7c59f4ec4043ce00$var$galleryEl","$7c59f4ec4043ce00$var$ApiService","$cyIMT","$7c59f4ec4043ce00$export$b981489921ee18cd","data1","forEach","film","getFilmDetails","then","data","markup","id","poster_path","original_title","title","genres","release_date","vote_average","insertAdjacentHTML","setTimeout","$37v9V","addListenerBtnYouTube","$4NjsD","onLoadLocalStrQuery","addWatchListActive","addQueueListActive"],"version":3,"file":"library.129df5db.js.map"}