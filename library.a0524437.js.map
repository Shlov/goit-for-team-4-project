{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,wCA2GwB,SAAEC,GACxBC,IACA,MAAMC,GAAa,EAAAC,EAAAC,MAAKJ,GACpBE,GAAcA,EAAWG,OAAS,IACpC,EAAAP,EAAAQ,oBAAmBJ,GACnBK,EAAeC,UAAUC,IAAI,oBAE7BF,EAAeC,UAAUE,OAAO,kB,CA7GpCC,CAAiB,SAEjB,MAAMC,EAAgBC,SAASC,cAAc,cACvCC,EAAcF,SAASC,cAAc,cACrCE,EAAYH,SAASC,cAAc,cACnCP,EAAiBM,SAASC,cAAc,mBACxCG,EAAa,IAAI,EAAAC,EAAAC,SA4GvB,SAASlB,IACPe,EAAUI,UAAY,E,CA3GxBR,EAAcS,iBAAiB,SAuBP,WACtBpB,IAnBKW,EAAcJ,UAAUc,SAAS,YACpCV,EAAcJ,UAAUC,IAAI,UAC5BM,EAAYP,UAAUc,SAAS,WAC3BP,EAAYP,UAAUE,OAAO,YAmBhB,EAAAP,EAAAC,MAAK,SACbmB,SAAQC,IACjBP,EAAWQ,eAAeD,GAAME,MAAKC,IACnC,MAAMC,EAAS,qCAAqCD,EAAKE,+CAEpCF,EAAKE,iLAKiBF,EAAKG,gCACrCH,EAAKI,8GAIWJ,EAAKK,yDAE1BL,EAAKM,OAAO,GAAGC,UAAUP,EAAKQ,wDAC5BR,EAAKS,yEAKbpB,EAAUqB,mBAAmB,YAAaT,EAAO,GACjD,IAGJU,WAAWC,EAAAC,sBAAuB,I,IArDpCzB,EAAYM,iBAAiB,SAyDL,WACtBpB,IA7CKc,EAAYP,UAAUc,SAAS,YAClCP,EAAYP,UAAUC,IAAI,UAC1BG,EAAcJ,UAAUc,SAAS,WAC7BV,EAAcJ,UAAUE,OAAO,YA6CpB,EAAAP,EAAAC,MAAK,SACbmB,SAAQC,IACfP,EAAWQ,eAAeD,GAAME,MAAKC,IACnC,MAAMC,EAAS,qCAAqCD,EAAKE,+CAEpCF,EAAKE,iLAKiBF,EAAKG,gCACrCH,EAAKI,8GAIWJ,EAAKK,yDAE1BL,EAAKM,OAAO,GAAGC,UAAUP,EAAKQ,wDAC5BR,EAAKS,yEAKbpB,EAAUqB,mBAAmB,YAAaT,EAAO,GACjD,IAGJU,WAAWC,EAAAC,sBAAuB,I","sources":["src/js/gallery.js"],"sourcesContent":["import { renderGalleryFilms } from './render-gallery-films';\nimport { load } from './local_storage';\nimport newsApiService from './fetch';\nimport { addListenerBtnYouTube } from './trailer';\n\nrenderSavedFilms('watch');\n\nconst watchedButton = document.querySelector('.btn-watch');\nconst queueButton = document.querySelector('.btn-queue');\nconst galleryEl = document.querySelector('.film-list');\nconst noFilmsMessage = document.querySelector('.alert__message');\nconst ApiService = new newsApiService();\n\nwatchedButton.addEventListener('click', handleClickWatched);\nqueueButton.addEventListener('click', handleClickQueue);\n\n// Проверка состояния кнопок watch и queue\nfunction addWatchListActive() {\n  if (!watchedButton.classList.contains('active')) {\n    watchedButton.classList.add('active');\n    queueButton.classList.contains('active')\n      ? queueButton.classList.remove('active')\n      : null;\n  }\n}\n\nfunction addQueueListActive() {\n  if (!queueButton.classList.contains('active')) {\n    queueButton.classList.add('active');\n    watchedButton.classList.contains('active')\n      ? watchedButton.classList.remove('active')\n      : null;\n  }\n}\n\n// Отрисовка фильмов из списка watch\nfunction handleClickWatched() {\n  cleanHTML();\n  addWatchListActive();\n\n  const arrWatched = load('watch');\n  arrWatched.forEach(film => {\n    ApiService.getFilmDetails(film).then(data => {\n      const markup = `<li class=\"card card-js\" data-id=\"${data.id}\">\n      <div>\n        <button data-id=\"${data.id}\" class=\"button-youtube\"></button>\n      </div>\n      <div class=\"card__wrap\">\n        <img\n          class=\"card__img\"\n          src=\"https://image.tmdb.org/t/p/w500/${data.poster_path}\"\n          alt=\"${data.original_title}\"\n          width=\"395\"\n          height=\"574\"\n        />\n        <h3 class=\"card__name\">${data.title}</h3>\n        <p class=\"card__info\">\n          ${data.genres[0].name} | ${data.release_date}<span class=\"card__rating\">\n            ${data.vote_average}\n          </span>\n        </p>\n      </div>\n    </li>`;\n      galleryEl.insertAdjacentHTML('beforeend', markup);\n    });\n  });\n\n  setTimeout(addListenerBtnYouTube, 500);\n}\n\n// // Отрисовка фильмов из списка queue\nfunction handleClickQueue() {\n  cleanHTML();\n  addQueueListActive();\n\n  const arrQueue = load('queue');\n  arrQueue.forEach(film => {\n    ApiService.getFilmDetails(film).then(data => {\n      const markup = `<li class=\"card card-js\" data-id=\"${data.id}\">\n      <div>\n        <button data-id=\"${data.id}\" class=\"button-youtube\"></button>\n      </div>\n      <div class=\"card__wrap\">\n        <img\n          class=\"card__img\"\n          src=\"https://image.tmdb.org/t/p/w500/${data.poster_path}\"\n          alt=\"${data.original_title}\"\n          width=\"395\"\n          height=\"574\"\n        />\n        <h3 class=\"card__name\">${data.title}</h3>\n        <p class=\"card__info\">\n          ${data.genres[0].name} | ${data.release_date}<span class=\"card__rating\">\n            ${data.vote_average}\n          </span>\n        </p>\n      </div>\n    </li>`;\n      galleryEl.insertAdjacentHTML('beforeend', markup);\n    });\n  });\n\n  setTimeout(addListenerBtnYouTube, 500);\n}\n\n// Рендер сохраненных фильмов\n\nfunction renderSavedFilms(key) {\n  cleanHTML();\n  const addedFilms = load(key);\n  if (addedFilms && addedFilms.length > 0) {\n    renderGalleryFilms(addedFilms);\n    noFilmsMessage.classList.add('visually-hidden');\n  } else {\n    noFilmsMessage.classList.remove('visually-hidden');\n  }\n}\n\n// Очистка страницы\nfunction cleanHTML() {\n  galleryEl.innerHTML = '';\n}\n"],"names":["$jyFSs","parcelRequire","key","$7c59f4ec4043ce00$var$cleanHTML","addedFilms","$fnyLm","load","length","renderGalleryFilms","$7c59f4ec4043ce00$var$noFilmsMessage","classList","add","remove","$7c59f4ec4043ce00$var$renderSavedFilms","$7c59f4ec4043ce00$var$watchedButton","document","querySelector","$7c59f4ec4043ce00$var$queueButton","$7c59f4ec4043ce00$var$galleryEl","$7c59f4ec4043ce00$var$ApiService","$cyIMT","default","innerHTML","addEventListener","contains","forEach","film","getFilmDetails","then","data","markup","id","poster_path","original_title","title","genres","name","release_date","vote_average","insertAdjacentHTML","setTimeout","$37v9V","addListenerBtnYouTube"],"version":3,"file":"library.a0524437.js.map"}